<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1-BIT CAT JUDGE | 1-ä½çŒ«å’ªå®¡åˆ¤å°</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #000;
            --fg: #fff;
            --border-width: 2px;
            --grid-size: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: crosshair;
        }

        body {
            background-color: var(--bg);
            color: var(--fg);
            font-family: 'Space Mono', 'Courier New', monospace;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        /* 1-Bit Scanline Effect */
        body::after {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(0deg,
                    rgba(0, 0, 0, 0.2),
                    rgba(0, 0, 0, 0.2) 1px,
                    transparent 1px,
                    transparent 2px);
            pointer-events: none;
            z-index: 1000;
            opacity: 0.3;
        }

        /* Container & Layout */
        .container {
            width: 100%;
            max-width: 800px;
            border: var(--border-width) solid var(--fg);
            padding: 20px;
            position: relative;
            background: var(--bg);
        }

        /* Header Section */
        header {
            border-bottom: var(--border-width) solid var(--fg);
            padding-bottom: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: -2px;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
            text-transform: uppercase;
        }

        .stats-bar {
            margin-top: 15px;
            font-size: 0.8rem;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .stats-item {
            padding: 4px 10px;
            border: 1px solid var(--fg);
        }

        /* Device Modules Grid */
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        @media (max-width: 600px) {
            .modules-grid {
                grid-template-columns: 1fr;
            }
        }

        .module {
            border: var(--border-width) solid var(--fg);
            padding: 20px;
            position: relative;
        }

        .module-header {
            position: absolute;
            top: -12px;
            left: 10px;
            background: var(--bg);
            padding: 0 5px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        /* Action Areas */
        .upload-zone {
            height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed var(--fg);
            transition: background 0.2s;
            cursor: pointer;
            text-align: center;
        }

        .upload-zone:hover,
        .upload-zone.dragover {
            background: var(--fg);
            color: var(--bg);
        }

        .btn {
            background: var(--bg);
            color: var(--fg);
            border: var(--border-width) solid var(--fg);
            padding: 10px 20px;
            font-family: inherit;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.2s;
        }

        .btn:hover {
            background: var(--fg);
            color: var(--bg);
        }

        .btn-large {
            width: 100%;
            font-size: 1.2rem;
            padding: 15px;
            margin-top: 30px;
        }

        /* Camera & Preview */
        .camera-container,
        .preview-container {
            width: 100%;
            aspect-ratio: 4/3;
            background: #111;
            border: 1px solid var(--fg);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        #video,
        #preview-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Loading / Analysis */
        .loading-module {
            display: none;
            padding: 40px;
            text-align: center;
        }

        .loading-module.active {
            display: block;
        }

        .loader {
            font-size: 2rem;
            margin-bottom: 20px;
            animation: blink 0.5s infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        .progress-container {
            height: 30px;
            border: var(--border-width) solid var(--fg);
            position: relative;
            margin-top: 20px;
        }

        .progress-bar {
            height: 100%;
            background: var(--fg);
            width: 0%;
            transition: width 0.1s linear;
        }

        /* Results Section */
        .results-section {
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .verdict-header {
            background: var(--fg);
            color: var(--bg);
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .verdict-header h2 {
            font-size: 3rem;
            margin-bottom: 5px;
        }

        .scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .score-item {
            border: 1px solid var(--fg);
            padding: 15px;
        }

        .score-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .score-value-container {
            display: flex;
            align-items: baseline;
            gap: 10px;
        }

        .score-num {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .evidence-module {
            margin-bottom: 30px;
        }

        .evidence-list {
            list-style: none;
            margin-top: 15px;
        }

        .evidence-list li {
            padding: 8px 0;
            border-bottom: 1px dotted var(--fg);
            font-size: 0.9rem;
        }

        .evidence-list li::before {
            content: "> ";
        }

        .sentence-box {
            border: var(--border-width) solid var(--fg);
            padding: 20px;
            background: var(--bg);
            margin-bottom: 30px;
            line-height: 1.6;
            font-style: italic;
        }

        /* Utilities */
        .hidden {
            display: none !important;
        }

        .ascii-art {
            white-space: pre;
            font-family: monospace;
            font-size: 8px;
            line-height: 1.2;
            margin-bottom: 10px;
        }

        /* Footer */
        footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.7rem;
            opacity: 0.5;
            padding-bottom: 20px;
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <div class="ascii-art">
                _ _ ____ _____ _______
                | | | | | _ \|_ _|__ __|
                | |__| |___| |_) | | | | |
                | __ |___| _ < | | | | | | | | | |_) |_| |_ | | |_| |_| |____/|_____| |_| </div>
                    <h1>1-ä½çŒ«å’ªå®¡åˆ¤å°</h1>
                    <p class="subtitle">ç³»ç»Ÿå‹å·: CAT-EYE-v1.0 // åˆ¤å†³èŠ¯ç‰‡-ING01</p>
                    <div class="stats-bar">
                        <span class="stats-item">ç³»ç»ŸçŠ¶æ€: è¿è¡Œä¸­</span>
                        <span class="stats-item">å·²å®¡åˆ¤: <span id="judgedCount">0</span></span>
                    </div>
        </header>

        <!-- Step 1: Input -->
        <div id="input-section" class="modules-grid">
            <div class="module">
                <div class="module-header">å›¾åƒè¾“å…¥.raw</div>
                <div class="upload-zone" id="drop-zone" onclick="document.getElementById('file-input').click()">
                    <div style="font-size: 3rem; margin-bottom: 10px;">[ğŸ“]</div>
                    <p>æ‹–æ‹½å›¾ç‰‡è‡³æ­¤<br>æˆ–ç‚¹å‡»ä¸Šä¼ ç½ªè¯</p>
                </div>
                <input type="file" id="file-input" class="hidden" accept="image/*" onchange="handleFileSelect(event)">
            </div>
            <div class="module">
                <div class="module-header">å®æ—¶ç›‘æ§.bin</div>
                <div id="camera-placeholder"
                    style="height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">[ğŸ“·]</div>
                    <button class="btn" onclick="startCamera()">åˆå§‹åŒ–æ‘„åƒå¤´</button>
                </div>
                <div id="camera-active" class="hidden">
                    <div class="camera-container">
                        <video id="video" autoplay playsinline muted></video>
                    </div>
                    <button class="btn" style="width: 100%;" onclick="capturePhoto()">ç°åœºæŠ“æ‹</button>
                    <button class="btn" style="width: 100%; border:none; font-size: 0.7rem;"
                        onclick="stopCamera()">[ç»ˆæ­¢é¢„è§ˆ]</button>
                </div>
            </div>
        </div>

        <!-- Step 1b: Preview & confirm -->
        <div id="preview-section" class="module hidden" style="margin-top:20px;">
            <div class="module-header">æ•è·ç¡®è®¤</div>
            <div class="preview-container">
                <img id="preview-img" src="" alt="Cat Preview">
                <div
                    style="position:absolute; bottom:10px; right:10px; background:var(--bg); padding:5px; border:1px solid var(--fg); font-size:0.6rem;">
                    å°±ç»ª_ç­‰å¾…åˆ¤å†³</div>
            </div>
            <button class="btn btn-large" onclick="analyzeCat()">æ‰§è¡Œå®¡åˆ¤ç¨‹åº</button>
            <button class="btn" style="width: 100%; border:none;" onclick="reset()">[æ’¤å›ç½ªè¯]</button>
        </div>

        <!-- Step 2: Loading / Analysis -->
        <div id="loading-section" class="module loading-module">
            <div class="module-header">æ ¸å¿ƒæ•°æ®åˆ†æä¸­</div>
            <div class="loader">[[[ æ­£åœ¨æ‰«æ ]]]</div>
            <div id="loading-text" style="font-size: 0.8rem; margin-bottom: 20px;">è·å–ç”Ÿç‰©ç‰¹å¾ä¸­...</div>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </div>

        <!-- Step 3: Results -->
        <div id="results-section" class="results-section">
            <div class="verdict-header">
                <div id="verdict-ascii"
                    style="font-family: monospace; white-space: pre; font-size: 10px; margin-bottom: 10px;"></div>
                <h2 id="verdict-title">æ ‡é¢˜</h2>
                <p id="verdict-subtitle">å‰¯æ ‡é¢˜</p>
            </div>

            <div class="scores-grid" id="scores-grid">
                <!-- Populated via JS -->
            </div>

            <div class="module evidence-module" id="evidence-module">
                <div class="module-header">çŠ¯ç½ªæ—¥å¿—.txt</div>
                <ul class="evidence-list" id="evidence-list">
                    <!-- Populated via JS -->
                </ul>
            </div>

            <div class="module">
                <div class="module-header">æœ€ç»ˆåˆ¤å†³ä¹¦</div>
                <div class="sentence-box" id="sentence-text">
                    æ­£åœ¨ç”Ÿæˆåˆ¤å†³å†…å®¹...
                </div>
            </div>

            <div class="module" style="margin-bottom: 30px;">
                <div class="module-header">ç§‘æ™®çŸ¥è¯†åº“</div>
                <p id="fun-fact" style="font-size: 0.8rem; line-height: 1.4;"></p>
            </div>

            <button class="btn btn-large" onclick="reset()">å®¡åˆ¤ä¸‹ä¸€ä½ç›®æ ‡</button>
        </div>

        <canvas id="canvas" class="hidden"></canvas>
    </div>

    <footer>
        &copy; 1-ä½å®¡åˆ¤ç³»ç»Ÿ v1.0.42 // æ‰€æœ‰çŒ«å’ªå‡å—æ³•å¾‹çº¦æŸ
    </footer>

    <script>
        // --- State ---
        let currentImage = null;
        let stream = null;
        let judgedCount = parseInt(localStorage.getItem('judgedCount_1bit') || '0');

        document.getElementById('judgedCount').textContent = judgedCount;

        // --- Core Data (Replicated from original) ---
        const dimensions = [
            { id: 'destruction', name: 'ç ´åæŒ‡æ•°', icon: '[ğŸ’¥]', desc: 'å®¶å…·å—æŸç¨‹åº¦ç›‘æµ‹' },
            { id: 'innocence', name: 'æ— è¾œæŒ‡æ•°', icon: '[ğŸ¥º]', desc: 'ç»¿èŒ¶/å–èŒçœ¼ç¥å¼ºåº¦' },
            { id: 'rebellion', name: 'å›é€†æŒ‡æ•°', icon: '[ğŸ˜ˆ]', desc: 'è¿æŠ—äººç±»æŒ‡ä»¤é¢‘ç‡' },
            { id: 'nightActivity', name: 'å¤œçŒ«å­æŒ‡æ•°', icon: '[ğŸŒ™]', desc: 'å‡Œæ™¨ä¸‰ç‚¹è·‘é…·ç»Ÿè®¡' },
            { id: 'attitude', name: 'ç¤¾äº¤æ€åº¦', icon: '[ğŸ˜’]', desc: 'é«˜å†·/é„™è§†äººç±»ç¨‹åº¦' },
            { id: 'foodTheft', name: 'å·é£Ÿæ¦‚ç‡', icon: '[ğŸ—]', desc: 'é¤æ¡Œé£Ÿç‰©å¤±è¸ªé£é™©' }
        ];

        const crimes = [
            'LEVEL 3 NOISE POLLUTION (03:00 AM) ğŸƒ',
            'GRAVITY TESTER: WATER CUP DISPLACED ğŸ’§',
            'PROPERTY DAMAGE: SOFA FABRIC BREACHED ğŸ›‹ï¸',
            'UNAUTHORIZED MEAL CONSUMPTION ğŸ—',
            'ITEM EJECTION FROM ELEVATED SURFACE ğŸ“¦',
            'ILLEGAL TERRITORY OCCUPATION (LAP/KEYBOARD) ğŸ›ï¸',
            'ACTIVE IGNORANCE OF DIRECT CALLS ğŸ™‰',
            'LITTER BOX PROTOCOL BREACHED ğŸ’©',
            'CRITICAL INFRASTRUCTURE DAMAGE (CABLES) ğŸ”Œ',
            'TEXTILE CONTAMINATION (CAT HAIR BIOMARKER) ğŸ‘”',
            'KEYBOARD INTERFERENCE DURING OPS âŒ¨ï¸',
            'TACTICAL BLOCKING OF TRANSPORT PORTALS ğŸšª'
        ];

        const verdicts = {
            good: {
                title: "ç»ä¸–å¥½çŒ«",
                subtitle: "ç›®æ ‡çŠ¶æ€: å¤©ä½¿çº§ç‰¹å·¥",
                ascii: "  (\\__/)\n  (='.'=)\n  (\")_(\")",
                sentences: [
                    "å®¡åˆ¤ç»“æœï¼šè¡Œä¸ºæå…¶ç«¯æ­£ã€‚å»ºè®®å¥–åŠ±é¡¶çº§ç½å¤´ã€‚ğŸ†",
                    "æœªå‘ç°çŠ¯ç½ªè®°å½•ã€‚ç›®æ ‡æ˜¯çŒ«ç•Œæ¥·æ¨¡ã€‚ğŸŒŸ",
                    "æ‰«ææ˜¾ç¤ºçµé­‚çº¯å‡€åº¦100%ã€‚å»ºè®®æ— é™æ¬¡æ’¸çŒ«ã€‚ğŸ“œ"
                ]
            },
            bad: {
                title: "æ³•å¤–ç‹‚çŒ«",
                subtitle: "ç›®æ ‡çŠ¶æ€: æ··ä¹±åˆ¶é€ è€…",
                ascii: "  /\\_/\\\n ( > . < )\n  )   (  \n /     \\",
                sentences: [
                    "å®¡åˆ¤ç»“æœï¼šæ£€æµ‹åˆ°æ··ä¹±æ ¸å¿ƒã€‚å»ºè®®ç«‹å³è¿›è¡Œçˆ±çš„æ•™è‚²ã€‚âš ï¸",
                    "ç½ªè¯ç¡®å‡¿ã€‚å³åˆ»æ²¡æ”¶ä»Šæ™šçš„å°é›¶é£Ÿã€‚ğŸš«",
                    "æƒ¯çŠ¯ç¡®è®¤ã€‚æ™šä¸Šè®°å¾—é”å¥½æˆ¿é—¨ã€‚ğŸ˜ˆ"
                ]
            },
            mystery: {
                title: "é‡å­çŒ«å’ª",
                subtitle: "ç›®æ ‡çŠ¶æ€: è–›å®šè°”çš„ä¸ç¡®å®šæ€§",
                ascii: "  /\\_/\\\n ( ? . ? )\n  )   (  \n /     \\",
                sentences: [
                    "å®¡åˆ¤ç»“æœï¼šæ£€æµ‹åˆ°è–›å®šè°”å±æ€§ã€‚è¡Œä¸ºæ¨¡å¼æ— æ³•é¢„æµ‹ã€‚ğŸ”®",
                    "åŒé‡çŒ«æ ¼ã€‚è¯·è°¨æ…æ¥è§¦ã€‚ğŸ­",
                    "ç›®æ ‡æ­£åœ¨æ¼”æˆã€‚å‘ç°å¥¥æ–¯å¡çº§åˆ«çš„ä¼ªè£…ã€‚ğŸ†"
                ]
            }
        };

        const facts = [
            'å‡Œæ™¨ä¸‰ç‚¹è·‘é…·æ˜¯åˆ»åœ¨DNAé‡Œçš„å¤œè¡Œç‹©çŒæ¨¡æ‹Ÿåè®®ã€‚ ğŸ§¬',
            'æ¨ç¿»ç‰©å“é€šå¸¸æ˜¯ä¸ºäº†æ ¡å‡†ç¯å¢ƒçš„é‡åŠ›å‚æ•°ã€‚ ğŸ”¬',
            'ç£¨çˆªæ˜¯é¢†åœ°æ ‡è®°ä¸ç¡¬ä»¶(çˆªå­)ç»´æŠ¤çš„å¿…è¦æµç¨‹ã€‚ ğŸ›‹ï¸',
            'é«˜å†·æ˜¯å› ä¸ºçŒ«è®¤ä¸ºäººç±»æ˜¯ç¼ºä¹ç‹©çŒèƒ½åŠ›çš„å·¨å‹æ®‹éšœçŒ«ã€‚ ğŸ±',
            'çŒ«æ— æ³•æ„ŸçŸ¥ç”œå‘³åŒ–åˆç‰©ã€‚ ğŸ¬',
            'å é¢†é”®ç›˜æ˜¯ä¸ºäº†åŒæ—¶è·å–çƒ­èƒ½ä¸äººç±»çš„å…³æ³¨ã€‚ âŒ¨ï¸',
            'ç¼“æ…¢çœ¨çœ¼æ˜¯çŒ«ç•Œçš„é«˜çº§ç¤ºçˆ±é€šè®¯åè®®ã€‚ ğŸ˜»',
            'å‘¼å™œå£°èƒ½è§¦å‘ç»„ç»‡ä¿®å¤å¹¶å¢å¼ºéª¨éª¼å¼ºåº¦ã€‚ ğŸ’š'
        ];

        const loadingSteps = [
            "æ­£åœ¨è§£ç è§†è§‰è¾“å…¥...",
            "æ­£åœ¨æå–çŒ«å’ªç”Ÿç‰©ç‰¹å¾...",
            "æ­£åœ¨è®¡ç®—ç ´åç³»æ•°...",
            "æ­£åœ¨æ£€ç´¢å…¨ç½‘çŠ¯ç½ªæ•°æ®åº“...",
            "æ­£åœ¨è¯„ä¼°ä¼ªè£…/å–èŒå¼ºåº¦...",
            "æ­£åœ¨å’¨è¯¢ç›®å‡»è¯äºº (å®¶é‡Œçš„ç‹—)...",
            "æ­£åœ¨ç”Ÿæˆæœ€ç»ˆåˆ¤å†³ä¹¦..."
        ];

        // --- Functions ---

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) handleFile(file);
        }

        function handleFile(file) {
            if (!file.type.startsWith('image/')) return alert('é”™è¯¯: æ–‡ä»¶æ ¼å¼éæ³•');
            const reader = new FileReader();
            reader.onload = (e) => showPreview(e.target.result);
            reader.readAsDataURL(file);
        }

        async function startCamera() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: true });
                const video = document.getElementById('video');
                video.srcObject = stream;
                document.getElementById('camera-placeholder').classList.add('hidden');
                document.getElementById('camera-active').classList.remove('hidden');
            } catch (err) {
                alert('é”™è¯¯: æ— æ³•å¼€å¯è§†è§‰ä¼ æ„Ÿå™¨ (æ‘„åƒå¤´)');
            }
        }

        function stopCamera() {
            if (stream) stream.getTracks().forEach(t => t.stop());
            document.getElementById('camera-placeholder').classList.remove('hidden');
            document.getElementById('camera-active').classList.add('hidden');
        }

        function capturePhoto() {
            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            showPreview(canvas.toDataURL('image/jpeg'));
            stopCamera();
        }

        function showPreview(src) {
            currentImage = src;
            document.getElementById('input-section').classList.add('hidden');
            document.getElementById('preview-section').classList.remove('hidden');
            document.getElementById('preview-img').src = src;
        }

        function analyzeCat() {
            document.getElementById('preview-section').classList.add('hidden');
            document.getElementById('loading-section').classList.add('active');

            let progress = 0;
            const bar = document.getElementById('progress-bar');
            const text = document.getElementById('loading-text');

            const interval = setInterval(() => {
                progress += Math.random() * 8;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(showResult, 500);
                }
                bar.style.width = progress + '%';

                // Update text based on progress
                const stepIdx = Math.floor((progress / 100) * loadingSteps.length);
                if (loadingSteps[stepIdx]) text.textContent = loadingSteps[stepIdx];
            }, 250);
        }

        function showResult() {
            document.getElementById('loading-section').classList.remove('active');
            document.getElementById('results-section').classList.add('active');

            // Logic: Random scores (replicated)
            const scores = {};
            let sum = 0;
            dimensions.forEach(d => {
                scores[d.id] = Math.floor(Math.random() * 100) + 1;
                sum += scores[d.id];
            });
            const avg = sum / dimensions.length;

            // Verdict selection
            let type = 'mystery';
            if (avg >= 70) type = 'good';
            else if (avg <= 45) type = 'bad';

            const v = verdicts[type];
            document.getElementById('verdict-title').textContent = v.title;
            document.getElementById('verdict-subtitle').textContent = v.subtitle;
            document.getElementById('verdict-ascii').textContent = v.ascii;

            // Populate scores
            const grid = document.getElementById('scores-grid');
            grid.innerHTML = '';
            dimensions.forEach(d => {
                const item = document.createElement('div');
                item.className = 'score-item';
                item.innerHTML = `
                    <div class="score-label">${d.name}</div>
                    <div class="score-value-container">
                        <span style="font-size:1.2rem;">${d.icon}</span>
                        <span class="score-num">${scores[d.id]}</span>
                        <span style="font-size:0.6rem; opacity:0.5;">/100</span>
                    </div>
                    <div style="font-size:0.6rem; margin-top:5px; opacity:0.7;">${d.desc}</div>
                `;
                grid.appendChild(item);
            });

            // Evidence
            const elist = document.getElementById('evidence-list');
            elist.innerHTML = '';
            if (type === 'bad' || Math.random() > 0.5) {
                document.getElementById('evidence-module').style.display = 'block';
                const count = type === 'bad' ? 4 : 2;
                const selected = crimes.sort(() => 0.5 - Math.random()).slice(0, count);
                selected.forEach(c => {
                    const li = document.createElement('li');
                    li.textContent = c;
                    elist.appendChild(li);
                });
            } else {
                document.getElementById('evidence-module').style.display = 'none';
            }

            // Sentence & Fact
            document.getElementById('sentence-text').textContent = v.sentences[Math.floor(Math.random() * v.sentences.length)];
            document.getElementById('fun-fact').textContent = "æ•°æ®æç¤º: " + facts[Math.floor(Math.random() * facts.length)];

            // Persistence
            judgedCount++;
            localStorage.setItem('judgedCount_1bit', judgedCount);
            document.getElementById('judgedCount').textContent = judgedCount;

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function reset() {
            currentImage = null;
            document.getElementById('results-section').classList.remove('active');
            document.getElementById('preview-section').classList.add('hidden');
            document.getElementById('input-section').classList.remove('hidden');
            document.getElementById('progress-bar').style.width = '0%';
            document.getElementById('file-input').value = '';
        }

        // Drag & Drop
        const dz = document.getElementById('drop-zone');
        dz.addEventListener('dragover', (e) => { e.preventDefault(); dz.classList.add('dragover'); });
        dz.addEventListener('dragleave', () => dz.classList.remove('dragover'));
        dz.addEventListener('drop', (e) => {
            e.preventDefault();
            dz.classList.remove('dragover');
            if (e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]);
        });

    </script>
</body>

</html>